language: node_js
cache:
  directories:
    - $HOME/.npm

jobs:
  include:
    - name: "Lint and Typecheck"
      node_js: stable
      script: npm run lint && npm run typecheck
    - name: "Tests (coveralls)" # Only run coveralls on stable
      node_js: stable
      script: npm run jest
      after_success: cat coverage/lcov.info | npx coveralls
    - node_js:
        - lts/erbium
        - lts/dubnium
      script: npm run jest
      jobs:
        include:
          name: "Tests" # Test in all supported versions (except stable, it was tested in previous job)
    - name: "Build"
      node_js: stable
      script: npm run build
    - name: "Generate Documentation"
      node_js: stable
      script: npm run docs
